class Imp: DoomPlayer
{	
	Actor teleporter;
	
	Default {
		+BUDDHA
		-PICKUP 
		
		Player.WeaponSlot 1, "ImpGun";
		Player.WeaponSlot 2, "ImpGun";
		Player.WeaponSlot 3, "ImpGun";
		Player.WeaponSlot 4, "ImpGun";
		Player.WeaponSlot 5, "ImpGun";
		Player.WeaponSlot 6, "ImpGun";
		Player.WeaponSlot 7, "ImpGun";
		
		Player.DisplayName "Imp";
		Player.StartItem "ImpGun";
		Player.StartItem "ImpGun";
		Player.StartItem "Clip",50;
		
		
		Speed 0.5;
		Health 100;
	}
	
	
	States
	{
		Spawn:
		TNT1 A 2 {
			if (teleporter != null) {
				teleporter = GetTeleporter();
			}
			A_Print("Spawned guy");
		}
		
		Pain:  //CHECK HP... IF == 1 teleport
		TNT1 A 2
		{
			if(A_JumpIfHealthLower(2,"Null"))
			{
				//teleport player here
				A_Print("HEY BUDDY TELEPORT ME"); //take this out
				//Teleport(0, 13, 0);
				//A_Warp();
				A_PlaySound("bg/doomjazz",4,1,1);
				//A_Teleport("ImpTeleported", "WHERE TO TP") //ADD THIS IN
				
			}
		}
		Goto Spawn;
		
		ImpTeleported:
		TNT1 A 2
		{
			A_PlaySound("bg/doomjazz",4,1,1);
		}
		Goto Spawn;
	}
	
	Actor GetTeleporter()
    {
        ThinkerIterator MonsterFinder = ThinkerIterator.Create("Actor");
        Actor mo;
        while ( mo = Actor(MonsterFinder.Next()) )
        {
            if ( mo.tid == 13 )
            {
                return mo;
            }
        }
		return null;
    }
}